<!doctype html>
<html>

<head>
	<link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>
		Online Ray Tracing Tool
	</title>

	<style>
		canvas {
			padding: 0;
		}

		canvas:focus {
			outline: none;
		}

		input {
			text-align: center;
		}
	</style>
</head>

<body class="blue lighten-5">
	<script type="text/javascript" src="js/jquery-2.1.3.min.js"></script>
	<script type="text/javascript" src="js/materialize.min.js"></script>
	<script type="text/javascript" src="js/RayTracing.js"></script>
	<script type="text/javascript" src="js/OBJParser.js"></script>
	<div class="container" style="width:85%">
		<div class="row">
			<div class="col s12 m12 l8" id="canv_area">
				<div class="card-panel" style="padding:0;line-height:0;">

					<canvas id="canv" class="" tabindex="0" width="432" height="321" style="width:100%;">Please use Chrome</canvas>
					<div class="progress" style="margin:0;display:none;">
						<div class="determinate" style="width:0%;margin:0;"></div>
					</div>
				</div>
			</div>
			<div class="col s12 m12 l4">
				<div class="card-panel">
					<div class="row">
						<div class="col s5 m3 l7">
							<p>
								<a onclick="startTracing();" class="btn waves-effect waves-light" style="width:100%;">Run</a>
							</p>
							<p>
								<a onclick="RAY.pause=true;" class="btn waves-effect waves-light" style="width:100%;">Pause</a>
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">
		var canv = $('#canv')[0];
		var ctx = canv.getContext('2d');
		$(document).ready(function() {
			// $('.materialboxed').materialbox();
			RAY.init(ctx, 432, 321, 0);
		});

		function startTracing() {
			RAY.pause = false;
			$('.progress').css('display','block');
			RAY.traceCanvas(function(){
				$('.determinate').css('width',100*RAY.progress/(RAY.width*RAY.height)+'%');
			},function() {
				$('.progress').css('display','none');
				Materialize.toast('Finish!', 1000);
			});
			// setInterval(function(){RAY.traceCanvas();},100);
		}
	</script>
</body>

</html>
